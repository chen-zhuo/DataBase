# 检索、去重、限制、排序

方便下面理解，这里列举一些示例数据：

```
数据表名：《通用认证信息》
+----+--------------+--------------+--------------+--------------+
| ID | 公司名称     | 认证项目     | 证书状态     | 发证机构     |
+----+--------------+--------------+--------------+--------------+
|  1 | 小白公司     | 机械         | 有效         | 国           |
|  2 | 小明公司     | 机械         | 过期         | 省           |
|  3 | 小红公司     | 电气         | 过期         | 市           |
+----+--------------+--------------+--------------+--------------+
```

### 检索

##### 检索单个列

检索表中的单个列：`SELECT 字段名称 FROM 表名;`

注意：**检索列时，仍然要先选中数据库，字段名称必须是表中有的。**

```
mysql> SELECT 公司名称 FROM 通用认证信息;
# 检索'公司名称'字段的值，共3行
+--------------+
| 公司名称     |
+--------------+
| 小白公司     |
| 小明公司     |
| 小红公司     |
+--------------+
3 rows in set (0.00 sec)
```

##### 检索多个列

检索表中的多个列：`SELECT 字段名称, 字段名称 FROM 表名;`

注意：**检索列时，仍然要先选中数据库，字段名称必须是表中有的。**

```
mysql> SELECT 公司名称, 证书状态 FROM 通用认证信息;
# 检索'公司名称','证书状态'字段的值，共3行
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小明公司     | 过期         |
| 小红公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)
```

##### 检索所有列

检索表中的所有列：`SELECT * FROM 表名`

注意：**`*`表示通配符，匹配所有列。**

```
mysql> SELECT * FROM 通用认证信息;
# 检索表中的所有列
+----+--------------+--------------+--------------+--------------+
| ID | 公司名称     | 认证项目     | 证书状态     | 发证机构     |
+----+--------------+--------------+--------------+--------------+
|  1 | 小白公司     | 机械         | 有效         | 国           |
|  2 | 小明公司     | 机械         | 过期         | 省           |
|  3 | 小红公司     | 电气         | 过期         | 市           |
+----+--------------+--------------+--------------+--------------+
3 rows in set (0.00 sec)
```

### 去重

去重检索表中的单个列：`SELECT DISTINCT 字段名称 FROM 表名;`

```
mysql> SELECT 认证项目 FROM 通用认证信息;
# 未去重的'认证项目'共有3项，但'机械'是重复，需要去重
+--------------+
| 认证项目     |
+--------------+
| 机械         |
| 机械         |
| 电气         |
+--------------+
3 rows in set (0.00 sec)


mysql> SELECT DISTINCT 认证项目 FROM 通用认证信息;
# 去重的'认证项目'共有2项，每项都不一样
+--------------+
| 认证项目     |
+--------------+
| 机械         |
| 电气         |
+--------------+
2 rows in set (0.00 sec)
```

### 限制

返回结果前m行数据：`SELECT 字段名称 FROM 通用认证信息 LIMIT m;`

返回结果第m行后n行数据：`SELECT 字段名称 FROM 通用认证信息 LIMIT m,n;`

```
mysql> SELECT id, 公司名称 FROM 通用认证信息 LIMIT 1;
# 返回结果第1行数据（包括第1行）
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  1 | 小白公司     |
+----+--------------+
1 row in set (0.00 sec)

mysql> SELECT id, 公司名称 FROM 通用认证信息 LIMIT 1,2;
# 返回结果第1行的后2行数据（不包括第1行）
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  2 | 小明公司     |
|  3 | 小红公司     |
+----+--------------+
2 rows in set (0.00 sec)
```

### 排序

##### 单列排序

升序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段名称;`

降序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段名称 DESC;`

注意：**检索数据时，若没有排序，其结果是没有特定顺序的。**

注意：**检索数据时，排序的字段可以是表中存在的任意字段。**

```
mysql> SELECT id, 公司名称 FROM 通用认证信息 ORDER BY id;
# 以'id'字段升序，输出'id', '公司名称'字段。
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  1 | 小白公司     |
|  2 | 小明公司     |
|  3 | 小红公司     |
+----+--------------+
3 rows in set (0.00 sec)

mysql> SELECT id, 公司名称 FROM 通用认证信息 ORDER BY id DESC;
# 以'id'字段降序，输出'id', '公司名称'字段。
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  3 | 小红公司     |
|  2 | 小明公司     |
|  1 | 小白公司     |
+----+--------------+
3 rows in set (0.00 sec)

mysql> SELECT id, 公司名称 FROM 通用认证信息 ORDER BY 证书状态 DESC;
# 以'证书状态'字段降序，输出'id', '公司名称'字段。
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  2 | 小明公司     |
|  3 | 小红公司     |
|  1 | 小白公司     |
+----+--------------+
3 rows in set (0.00 sec)
```

##### 多列排序

先字段1升序，后字段2升序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段1, 字段2;`

先字段2升序，后字段1升序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段2, 字段1;`

先字段1升序，后字段2降序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段1, 字段2 DESC;`

先字段1降序，后字段2降序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段1 DESC, 字段2 DESC;`

注意：**如果想在多个列上进行降序排序，必须对每个列指定DESC关键字。**

注意：**与DESC相反的关键字是ASC（ASCENDING），实际ASC没有多大用处，因为升序是默认的（如果既不指定ASC也不指定DESC，则假定为ASC）。**

```
mysql> SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY 公司名称,证书状态;
# 以'公司名称'升序，再以'证书状态'升序，输出'公司名称','证书状态'字段
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小明公司     | 过期         |
| 小白公司     | 有效         |
| 小红公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)

mysql> SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY 证书状态,公司名称;
# 以'证书状态'升序，再以'公司名称'升序，输出'公司名称','证书状态'字段
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小明公司     | 过期         |
| 小红公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)

mysql> SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY 证书状态,公司名称 DESC;
# 以'证书状态'升序，再以'公司名称'降序，输出'公司名称','证书状态'字段
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小红公司     | 过期         |
| 小明公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)
```

##### 排序限制

结合排序和限制：`SELECT 字段1, 字段2... FROM 表名 ORDER BY 字段名称 LIMIT 返回数量;`

```
mysql> SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY id LIMIT 2;
# 以id升序检索，输出'公司名称','证书状态'字段结果的前2条
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小明公司     | 过期         |
+--------------+--------------+
2 rows in set (0.00 sec)
```