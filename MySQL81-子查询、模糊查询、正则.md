# 子查询、模糊查询、正则

### 子查询

**SQL允许创建子查询（subquery），即嵌套在其他查询中的查询。**

##### 子查询过滤

```sql
-- 1.查询'字段2'的值为year的所有行其中字段1的值(假如查询结果为：2008,2020)
SELECT 字段1 FROM 表名 WHERE 字段2 = 'year';
-- 2.根据上面的查询结果，查询'字段1'的值为'2008'和'2020'的所有行的字段3的值
SELECT 字段3 FROM 表名 WHERE 字段1 IN ('2008', '2020');

-- 将上面两次查询写成一个子查询
SELECT 字段3 FROM 表名 WHERE 字段1 IN (SELECT 字段1 FROM 表名 WHERE 字段2 = 'year');
```

?> 在 `SELECT` 语句中，子查询总是从内向外处理。

?> 虽然子查询一般与IN操作符结合使用，但也可以用于测试等于（=）、不等于（<>）等。

!> 在 `WHERE` 子句中使用子查询能够编写出功能很强并且很灵活的SQL语句。对于能嵌套的子查询的数目没有限制，不过在实际使用时由于性能的限制，不能嵌套太多的子查询。

##### 子查询计算

```sql
-- SELECT COUNT(*)对表中的行进行计数
-- GROUP BY 字段是对字段进行分组
-- 'NEW_字段'是一个计算字段，它是由圆括号中的子查询建立的。该子查询对检索出的每行各执行一次。
SELECT 字段 (SELECT COUNT(*) FROM 表名 WHERE 字段 = '1') AS NEW_字段 FROM 表名 GROUP BY 字段; 
```





















