# 比较、判断、连接条件

为了下面方便理解，这里给出如下示例数据：

```
数据表名:《通用认证信息》
+----+--------------+--------------+--------------+
| ID | 公司名称     | 认证项目     | 证书状态     |
+----+--------------+--------------+--------------+
|  1 | 小白公司     | 机械         | 有效         |
|  2 | 小明公司     | 机械         | 过期         |
|  3 | 小红公司     | 电气         | 过期         |
+----+--------------+--------------+--------------+
```

### 比较

数据库表一般包含大量的数据，很少需要检索表中所有行。通常只需要提取表数据的子集，检索所需数据需要指定搜索条件（search criteria），搜索条件也称为过滤条件（filter condition）。

##### 比较操作符

|    操作符    |        说明        |
| :----------: | :----------------: |
|     `=`      |        等于        |
| `<>` 或 `!=` |       不等于       |
|     `<`      |        小于        |
|     `<=`     |      小于等于      |
|     `>`      |        大于        |
|     `>=`     |      大于等于      |
|  `BETWEEN`   | 在指定的两个值之间 |

##### 等于检查

等于检查单值：`SELECT 字段名称 FROM 表名 WHERE 字段名称 = 字段值;`

注意：**WHERE 后面字段类型为int时，字段值不用加`''`。**

注意：**WHERE 后面字段类型为str时，字段值必须加`''`。**

```sql
SELECT 公司名称 FROM 通用认证信息 WHERE 证书状态=有效;
/*
# '证书状态'字段为str类型，字段值必须加''，否则会报错
ERROR 1054 (42S22): Unknown column '有效' in 'where clause'
*/

SELECT 公司名称 FROM 通用认证信息 WHERE 证书状态 = '有效';
/*
# 筛选'证书状态'为'有效'，输出公司名称
+--------------+
| 公司名称     |
+--------------+
| 小白公司     |
+--------------+
1 row in set (0.00 sec)
*/

SELECT 公司名称 FROM 通用认证信息 WHERE id >= 2;
/*
# id是int类型的不用加''
+--------------+
| 公司名称     |
+--------------+
| 小明公司     |
| 小红公司     |
+--------------+
2 rows in set (0.00 sec)
*/
```

##### 不等于检查

不等于检查单值：`SELECT 字段名称 FROM 表名 WHERE 字段名称 <> 字段值;`

注意：**WHERE 后面字段类型为int时，字段值不用加`''`。**

注意：**WHERE 后面字段类型为str时，字段值必须加`''`。**

```sql
SELECT id,公司名称 FROM 通用认证信息 WHERE id <> 2;
/*
# 筛选'id'不等于2，输出'id','公司名称'
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  1 | 小白公司     |
|  3 | 小红公司     |
+----+--------------+
2 rows in set (0.00 sec)
*/
```

##### 范围检查

范围检查单值：`SELECT 字段名称 FROM 表名 WHERE 字段名称 BETWEEN 字段值 AND 字段值;`

注意：**BETWEEN 后面的2个字段值必须用AND符连接。**

```sql
SELECT id,公司名称 FROM 通用认证信息 WHERE id BETWEEN 1 AND 2;
/*
# 筛选'id'在1到2（包含1和2），输出'id','公司名称'
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  1 | 小白公司     |
|  2 | 小明公司     |
+----+--------------+
2 rows in set (0.00 sec)
*/
```

### 判断

##### 判断操作符

|  判断符  |    说明    |
| :------: | :--------: |
|   `IS`   |     是     |
| `NOT IS` |    不是    |
|   `IN`   |  在范围内  |
| `NOT IN` | 不在范围内 |

##### 判断空值

空值检查单值：`SELECT 字段名称 FROM 表名 WHERE 字段名称 IS NULL;`

注意：**NULL表示不可知不确定，NULL不与任何值相等（包括其本身）。**

注意：**`IS NULL` 判断某个字符是否为空，并不代表空字符或者是0。**

注意：**`= NULL` 是判断某个值是否等于NULL，但NULL不与任何值相等。**

```sql
SELECT id,公司名称 FROM 通用认证信息 WHERE 认证项目 IS NULL;
/*
# 筛选'认证项目'是空，输出'id','公司名称'，没有符合条件的结果
Empty set (0.00 sec)
*/
```

##### 判断范围

非条件语句：`SELECT 字段名称 FROM 表名 WHERE 字段名称 NOT IN (字段值,字段值...);`

注意：**NOT操作符就是否定它之后所跟的任何条件。**

注意：**NOT操作符不能单独使用，需要配合IS或者IN。**

```sql
SELECT id,公司名称,证书状态 FROM 通用认证信息 WHERE id NOT IN (1,3);
/*
# 筛选id不在(1,3)范围里面，输出'id','公司名称','证书状态'
+----+--------------+--------------+
| id | 公司名称     | 证书状态     |
+----+--------------+--------------+
|  2 | 小明公司     | 过期         |
+----+--------------+--------------+
1 row in set (0.00 sec)
*/
```

### 连接条件

过滤条件可以多个相连接，这就需要操作符来连接了。

##### 逻辑操作符

| 连接符 | 说明 |
| :----: | :--: |
| `AND`  |  与  |
|  `OR`  |  或  |

##### AND操作符

与条件语句：`SELECT 字段名称 FROM 表名 WHERE 字段1 比较操作符 字段值 AND 字段2 比较操作符 字段值 AND ...;`

注意：**用AND连接的条件语句，每个都要满足，才输出。**

注意：**每添加一条件语句就要使用一个AND。**

```sql
SELECT id,公司名称,证书状态 FROM 通用认证信息 WHERE id <> 2 AND 证书状态 = '有效';
/*
+----+--------------+--------------+
| id | 公司名称     | 证书状态     |
+----+--------------+--------------+
|  1 | 小白公司     | 有效         |
+----+--------------+--------------+
1 row in set (0.00 sec)
*/
```

##### OR操作符

或条件语句：`SELECT 字段名称 FROM 表名 WHERE 字段1 比较操作符 字段值 OR 字段2 比较操作符 字段值 OR ...;`

注意：**用OR连接的条件语句，只要一个都要满足，就输出。**

注意：**每添加一条件语句就要使用一个OR。**

```sql
SELECT id,公司名称,证书状态 FROM 通用认证信息 WHERE id <> 2 OR 证书状态 = '有效';
/*
+----+--------------+--------------+
| id | 公司名称     | 证书状态     |
+----+--------------+--------------+
|  1 | 小白公司     | 有效         |
|  3 | 小红公司     | 过期         |
+----+--------------+--------------+
2 rows in set (0.00 sec)
*/
```

##### 比较次序

注意：**在sql中AND的执行次序要高于OR。**

注意：**在条件句外侧加`()`，可以提高执行次序。**

```sql
-- 这里筛选id不等于2或者’证书状态‘是’过期‘，并且’认证项目‘是’电气‘公司，结合条件只有’小红公司‘符合。

SELECT id,公司名称,认证项目,证书状态 FROM 通用认证信息 WHERE id != 2 OR 证书状态='过期' AND 认证项目='电气';
/*
# 下面的筛选结果中出现了小白公司，按理说它是不符合条件的
+----+--------------+--------------+--------------+
| id | 公司名称     | 认证项目     | 证书状态     |
+----+--------------+--------------+--------------+
|  1 | 小白公司     | 机械         | 有效         |
|  3 | 小红公司     | 电气         | 过期         |
+----+--------------+--------------+--------------+
2 rows in set (0.00 sec)
*/

-- 出现上面结果的原因是，在sql中AND的执行次序要高于OR。先筛选了’证书状态‘是’过期‘并且’认证项目‘是’电气‘，再或者id不等于2的公司。

-- 在条件句外侧加'()'，可以提高执行次序。
SELECT id,公司名称,认证项目,证书状态 FROM 通用认证信息 WHERE (id != 2 OR 证书状态='过期') AND 认证项目='电气';
/*
+----+--------------+--------------+--------------+
| id | 公司名称     | 认证项目     | 证书状态     |
+----+--------------+--------------+--------------+
|  3 | 小红公司     | 电气         | 过期         |
+----+--------------+--------------+--------------+
1 row in set (0.00 sec)
*/
```

