# DQL语言：基础查询

DQL语言：即数据查询语言，主要作用是查询检索数据库中的数据的SQL语言。

### 语法特点

```sql
/*
语法：
SELECT 查询列表 FROM 表名;

特点：
1.查询列表可以是：表中的字段、常量值、表达式、函数。
2.查询的结果是一个虚拟的表格，不是真实存在的。
*/
```

### 字段查询

##### 查询单个字段

检索表中的单个列：`SELECT 字段名称 FROM 表名;`

!> 注意：**查询时，要在表所在的数据库中查询。如果查询的表在其他数据库，需要先指定数据库 `USE 数据库名;`**

```sql
-- 因为Nactive默认指定了表所在的数据库，就不用再次指定数据库了
SELECT last_name FROM employees;
```

![QQ截图20201122023644](image/QQ截图20201122023644.png)

##### 查询多个字段

检索表中的多个列：`SELECT 字段名称, 字段名称... FROM 表名;`

!> 注意：**查询时，要在表所在的数据库中查询。如果查询的表在其他数据库，需要先指定数据库 `USE 数据库名;`**

```sql
-- 因为Nactive默认指定了表所在的数据库，就不用再次指定数据库了
SELECT
	last_name,
	salary,
	email
FROM
	employees;
```

![QQ截图20201122024046](image/QQ截图20201122024046.png)

##### 查询所有字段

检索表中的所有列：`SELECT * FROM 表名`

?> `*` 表示通配符，匹配所有列。

```sql
SELECT
	*
FROM
	employees;
```

![QQ截图20201122024329](image/QQ截图20201122024329.png)

### 其他查询

##### 查询常量值

SQL语句可以查询常量值，只不过查询结果的字段名称和字段内容都是查询值。

```sql
SELECT
	100;
```

![QQ截图20201122233720](image/QQ截图20201122233720.png)

```sql
SELECT
	'john';
```

![QQ截图20201122233828](image/QQ截图20201122233828.png)

##### 查询表达式

SQL语句还可以执行加减乘除的表达式，字段名称就是查询名称，内容就是计算结果。

```sql
SELECT
	100*98;
```

![QQ截图20201122234050](image/QQ截图20201122234050.png)

##### 查询函数

```sql
-- 查询当前数据库版本
SELECT
	VERSION();
```

![QQ截图20201122234251](image/QQ截图20201122234251.png)

### 起别名

上面的查询有一个不方便的地方，就是查询结果的字段名称不直观，这里就可以使用“起别名”功能：

1. 方便理解查询字段的意思
2. 查询的字段有重名的情况，使用别名可以区分开来

##### as关键字

`as`关键字：将一个字段或值的名称替换成另一个名称。

```sql
SELECT
	100 * 98 AS 结果;
```

![QQ截图20201122235110](image/QQ截图20201122235110.png)

##### 空格替代

**`as`关键字是可以用空格代替的。**

```sql
SELECT
	100 * 98 结果;
```

![QQ截图20201122235231](image/QQ截图20201122235231.png)

**需要注意的是，如果更名后的名称中本身带有空格，需要加上单引号或双引号。**

```sql
SELECT
	salary "out put"
FROM
	employees;
```

![QQ截图20201122235603](image/QQ截图20201122235603.png)

### 去重

去重检索表中的单个列：`SELECT DISTINCT 字段名称 FROM 表名;`

```sql
-- 查询员工表中涉及到的所有的部门编号
SELECT DISTINCT
	department_id
FROM
	employees;
```

![QQ截图20201123000043](image/QQ截图20201123000043.png)

### 限制

返回结果前m行数据：`SELECT 字段名称 FROM 通用认证信息 LIMIT m;`

返回结果第m行后n行数据：`SELECT 字段名称 FROM 通用认证信息 LIMIT m,n;`

```sql
SELECT id, 公司名称 FROM 通用认证信息 LIMIT 1;
/*
返回结果第1行数据（包括第1行）
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  1 | 小白公司     |
+----+--------------+
1 row in set (0.00 sec)
*/

SELECT id, 公司名称 FROM 通用认证信息 LIMIT 1,2;
/*
# 返回结果第1行的后2行数据（不包括第1行）
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  2 | 小明公司     |
|  3 | 小红公司     |
+----+--------------+
2 rows in set (0.00 sec)
*/
```

### 排序

##### 单列排序

升序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段名称;`

降序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段名称 DESC;`

!> 注意：**检索数据时，若没有排序，其结果是没有特定顺序的。**

!> 注意：**检索数据时，排序的字段可以是表中存在的任意字段。**

```sql
SELECT id, 公司名称 FROM 通用认证信息 ORDER BY id;
/*
# 以'id'字段升序，输出'id', '公司名称'字段。
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  1 | 小白公司     |
|  2 | 小明公司     |
|  3 | 小红公司     |
+----+--------------+
3 rows in set (0.00 sec)
*/

SELECT id, 公司名称 FROM 通用认证信息 ORDER BY id DESC;
/*
# 以'id'字段降序，输出'id', '公司名称'字段。
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  3 | 小红公司     |
|  2 | 小明公司     |
|  1 | 小白公司     |
+----+--------------+
3 rows in set (0.00 sec)
*/

SELECT id, 公司名称 FROM 通用认证信息 ORDER BY 证书状态 DESC;
/*
# 以'证书状态'字段降序，输出'id', '公司名称'字段。
+----+--------------+
| id | 公司名称     |
+----+--------------+
|  2 | 小明公司     |
|  3 | 小红公司     |
|  1 | 小白公司     |
+----+--------------+
3 rows in set (0.00 sec)
*/
```

##### 多列排序

先字段1升序，后字段2升序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段1, 字段2;`

先字段2升序，后字段1升序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段2, 字段1;`

先字段1升序，后字段2降序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段1, 字段2 DESC;`

先字段1降序，后字段2降序检索：`SELECT 字段名称 FROM 表名 ORDER BY 字段1 DESC, 字段2 DESC;`

!> 注意：**如果想在多个列上进行降序排序，必须对每个列指定DESC关键字。**

!> 注意：**与DESC相反的关键字是ASC（ASCENDING），实际ASC没有多大用处，因为升序是默认的（如果既不指定ASC也不指定DESC，则假定为ASC）。**

```sql
SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY 公司名称,证书状态;
/*
# 以'公司名称'升序，再以'证书状态'升序，输出'公司名称','证书状态'字段
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小明公司     | 过期         |
| 小白公司     | 有效         |
| 小红公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)
*/

SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY 证书状态,公司名称;
/*
# 以'证书状态'升序，再以'公司名称'升序，输出'公司名称','证书状态'字段
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小明公司     | 过期         |
| 小红公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)
*/

SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY 证书状态,公司名称 DESC;
/*
# 以'证书状态'升序，再以'公司名称'降序，输出'公司名称','证书状态'字段
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小红公司     | 过期         |
| 小明公司     | 过期         |
+--------------+--------------+
3 rows in set (0.00 sec)
*/
```

##### 排序限制

结合排序和限制：`SELECT 字段1, 字段2... FROM 表名 ORDER BY 字段名称 LIMIT 返回数量;`

```sql
SELECT 公司名称,证书状态 FROM 通用认证信息 ORDER BY id LIMIT 2;
/*
# 以id升序检索，输出'公司名称','证书状态'字段结果的前2条
+--------------+--------------+
| 公司名称     | 证书状态     |
+--------------+--------------+
| 小白公司     | 有效         |
| 小明公司     | 过期         |
+--------------+--------------+
2 rows in set (0.00 sec)
*/
```