# 数据库

本知识库主要是讲解数据库的基本知识。

### 数据库简介

##### 数据库定义

数据库(DataBase)：**保存有组织的数据的容器（通常是一个文件或一组文件）**。

##### 数据库应用

我们所有见到的跟日常生活有关、需要记录的信息基本全部放在数据库里面：

1. 身份证信息放在公安部的系统
2. 银行卡的余额和交易记录、转帐信息
3. 在酒店的开房信息（所以出现了数据库被盗和信息泄漏）
4. 飞机、火车、汽车联网购票记录
5. QQ聊天记录、网上购物、贴吧、喜欢听的音乐、电影的收藏信息
6. 手机电话机录、余额、公交卡余额、水费、电费、彩票的购买记录
7. 打游戏的装备、等级、魔力、力量、攻击能力等信息

##### ACID特性

​	原子性 - A：要么全做，要么不做

​	一致性 - C：事务前后的系统状态是一致的

​	隔离性 - I：并发执行的事物无法看到彼此的中间状态

​	持久性 - D：事务完成后所做的改变都会被持久化

### 数据库分类

数据库主要分为两大类：关系型数据库、非关系型数据库。

##### 关系型数据库

常见的关系型数据库（SQL）： MySQL，SQL server，SQLite，Oracle（收费）

MySQL：数据放在磁盘、开源、免费。

特性：

1. 关系型数据库，是指采用了关系模型来组织数据的数据库； 
2. 关系型数据库的最大特点就是事务的一致性；
3. 关系模型指二维表格模型， 而一个关系型数据库就是由二维表及其之间的联系所组成的一个数据组织。

优点：

1. 容易理解：二维表结构是非常贴近逻辑世界一个概念，关系模型相对网状、层次等其他模型来说更容易理解；
2. 使用方便：通用的SQL语言使得操作关系型数据库非常方便；
3. 易于维护：丰富的完整性大大减低了数据冗余和数据不一致的概率；
4. 支持SQL，可用于复杂的查询。

缺点：

1. 为了维护一致性所付出的巨大代价就是其读写性能比较差；
2. 固定的表结构；
3. 高并发读写需求；
4. 海量数据的高效率读写；

##### 非关系型数据库

常见的非关型数据库（NoSQL）：Redis，MongoDB，HBase

Redis：数据放在内存、读写非常快（辅助存储用作缓存，也可持久存储）、对内存要求高、开源。

特性：

1. 使用键值对存储数据； 
2. 读写性能高、成本低、分布式； 
3. 一般不支持ACID特性； 
4. 非关系型数据库严格上不是一种数据库，应该是一种数据结构化存储方法的集合。

优点：

1. 无需经过sql层的解析，读写性能很高； 
2. 基于键值对，数据没有耦合性，容易扩展； 
3. 存储数据的格式是key,value形式、文档形式、图片形式等等，而关系型数据库则只支持基础类型。

缺点：

1. 不提供sql支持，学习和使用成本较高；
2. 无事务处理，附加功能bi和报表等支持也不好；

##### 判断方法

**通常来根据外键来判段数据库类型：能使用外键则是关系型数据库，不能使用外键则非关系型数据库。**

### 基本知识点

##### 数据库默认端口

```
# MySQL默认端口3306
MYSQL_PORT = 3306

# MongoDB默认端口27017
MONGO_PORT = 27017

# Rrdis默认端口6379
REDIS_PORT = 6379
```

##### 语言区别

在结构化查询语言上的含义区别：

| SQL         | NoSQL       | 解释（SQL/NoSQL）      |
| ----------- | ----------- | ---------------------- |
| database    | database    | 数据库/数据库          |
| table       | collection  | 二维表/集合            |
| row         | document    | 记录（行）/文档        |
| column      | field       | 字段（列）/域          |
| index       | index       | 索引/索引              |
| table joins | ---         | 表连接/嵌套文档        |
| primary key | primary key | 主键/主键（`_id`字段） |
